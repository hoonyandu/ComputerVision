import csv
import os

class MakeCsv:
    def __init__(self, _dirPath):
        self.m_DirPath = _dirPath

    def SaveCsv(self, _subdirectory, _savePath):
        classes = ['malware', 'benign']
        dataPath = os.path.join(self.m_DirPath, _subdirectory)

        csvFile = open(_savePath, 'w', newline = '')
        csvWriter = csv.writer(csvFile)
        csvWriter.writerow(['malware', 'benign', 'filepath'])


        for cl in classes:
            subDirPath = os.path.join(dataPath, cl)
            fileList = os.listdir(subDirPath)

            for f in fileList:
                filepath = os.path.join(subDirPath, f)
                if cl == 'malware':
                    csvWriter.writerow([1, 0, filepath])
                else:
                    csvWriter.writerow([0, 1, filepath])

        csvFile.close()

if __name__ == '__main__':
    dirPath = '/Users/hoony/Downloads/normalized-set'
    subdirectory = 'training'
    savePath = '/Users/hoony/source/tensorflow2/data/training.csv'

    mainClass = MakeCsv(dirPath)
    mainClass.SaveCsv(subdirectory, savePath)


